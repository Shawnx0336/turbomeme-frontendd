<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, viewport-fit=cover" name="viewport"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<title>SolRoulette LIVE - Spin to Win</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&amp;display=swap" rel="stylesheet"/>
<style>
        /* Reset and Base Styles */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: 'Inter', -apple-system, sans-serif;
            background: linear-gradient(180deg, #0A0A0A, #1A1A1A);
            color: #FFFFFF;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            position: relative; /* Needed for absolute positioning of overlays */
        }
        :root {
            --primary: #9945FF; /* Purple branding */
            --danger: #FF375F; /* Red for losses */
            --success: #14F195; /* Green for wins */
            --accent: #FFD700; /* Gold for highlights */
            --secondary: #1A1A1A; /* Dark panels */
            --text: #FFFFFF;
            --background-gradient: linear-gradient(180deg, #0A0A0A, #1A1A1A);
            --panel-background: rgba(26, 26, 26, 0.8); /* Semi-transparent dark */
            --panel-border-radius: 12px;
            --button-border-radius: 8px;
            --input-border-radius: 8px;
        }
        .container {
            max-width: 100%;
            height: 100%;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1; /* Ensure content is above background effects */
        }

        /* Background Effects */
        .background-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(153, 69, 255, 0.1) 0%, rgba(10, 10, 10, 0) 50%);
            pointer-events: none;
            z-index: 0;
            overflow: hidden; /* Hide particles outside */
        }

        /* Particle FX */
        .particle {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: var(--accent);
            border-radius: 50%;
            pointer-events: none;
            animation: particle-float 5s infinite ease-out;
            opacity: 0;
        }

        @keyframes particle-float {
            0% { transform: translateY(0) translateX(0) scale(1); opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translateY(-200px) translateX(50px) scale(0.5); opacity: 0; }
        }

         .background-overlay.intensify-particles .particle {
             animation-duration: 3s; /* Faster float */
             animation-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Different easing */
             opacity: 1; /* Always visible during intensification */
         }


        /* Money Rain Effect */
        .money-rain {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: var(--success);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%); /* Simple triangle coin */
            pointer-events: none;
            animation: money-fall 2s ease-in forwards;
            opacity: 0;
        }

        @keyframes money-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Strobe Effect during spin */
        .strobe-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1); /* Subtle white overlay */
            pointer-events: none;
            z-index: 0;
            opacity: 0;
        }

        .strobe-overlay.active {
            animation: strobe 0.2s infinite alternate;
        }

        @keyframes strobe {
            0% { opacity: 0; }
            100% { opacity: 0.1; }
        }


        /* Animations */
        @keyframes pulse-glow {
            0% { filter: drop-shadow(0 0 4px var(--primary)); }
            100% { filter: drop-shadow(0 0 16px var(--primary)); }
        }
         @keyframes pulse-glow-red {
            0% { filter: drop-shadow(0 0 4px var(--danger)); }
            100% { filter: drop-shadow(0 0 16px var(--danger)); }
         }
        @keyframes enter {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-60px); opacity: 0; }
        }
        /* Spin animation will be controlled by JS for precise landing */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            }
        @keyframes vibrate {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-2px); }
            75% { transform: translateX(2px); }
            }
         @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
         @keyframes timer-pulse-fast {
             0% { transform: translateX(-50%) scale(1); }
             50% { transform: translateX(-50%) scale(1.1); }
             100% { transform: translateX(-50%) scale(1); }
         }
         @keyframes pointer-pulse {
             0% { filter: drop-shadow(0 0 4px var(--accent)); }
             50% { filter: drop-shadow(0 0 20px var(--accent)); }
             100% { filter: drop-shadow(0 0 4px var(--accent)); }
         }
         @keyframes subtle-vibrate {
             0%, 100% { transform: translateX(0); }
             25% { transform: translateX(-1px); }
             75% { transform: translateX(1px); }
         }
         /* Glow effect for onboarding tooltip target */
         @keyframes onboarding-glow {
             0% { box-shadow: 0 0 5px var(--accent); }
             50% { box-shadow: 0 0 20px var(--accent), 0 0 30px var(--accent); }
             100% { box-shadow: 0 0 5px var(--accent); }
         }
         /* Wheel Pulse during countdown */
         @keyframes wheel-pulse-glow {
             0% { box-shadow: 0 0 64px rgba(153, 69, 255, 0.3), 0 0 32px rgba(255, 215, 0, 0.3); }
             50% { box-shadow: 0 0 80px rgba(153, 69, 255, 0.5), 0 0 40px rgba(255, 215, 0, 0.5); }
             100% { box-shadow: 0 0 64px rgba(153, 69, 255, 0.3), 0 0 32px rgba(255, 215, 0, 0.3); }
         }


        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: var(--panel-background);
            border-radius: var(--panel-border-radius);
            margin: 10px;
            width: calc(100% - 20px); /* Adjust for margin */
            max-width: 800px; /* Limit header width on larger screens */
            backdrop-filter: blur(6px);
            z-index: 10;
            /* Added gap for spacing between header elements */
            gap: 10px;
        }
         .site-title {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary);
            text-shadow: 0 0 8px rgba(153, 69, 255, 0.5);
            /* Prevent shrinking */
            flex-shrink: 0;
        }
        .players-online, .user-profile {
            background: rgba(26, 26, 26, 0.5); /* More transparent */
            padding: 8px 12px;
            border-radius: var(--button-border-radius);
            font-size: 0.9em;
             /* Added gap for spacing inside these elements */
            gap: 8px;
             /* Allow shrinking */
            flex-shrink: 1;
             min-width: 0; /* Allow flex items to shrink below content size */
        }
        .user-profile {
            display: flex;
            align-items: center;
            cursor: pointer; /* Indicate clickable */
             transition: transform 0.2s;
             /* Added gap for spacing inside user profile */
             gap: 8px;
             /* Added flex-wrap for smaller screens */
             flex-wrap: wrap;
        }
        .user-profile:hover {
             transform: translateY(-2px);
        }
        .avatar {
            width: 28px; /* Slightly larger */
            height: 28px;
            border-radius: 50%;
            background: var(--accent);
            display: grid;
            place-items: center;
            font-size: 0.9em;
            border: 2px solid var(--text);
             flex-shrink: 0; /* Prevent shrinking */
        }
         .user-info {
             display: flex;
             flex-direction: column;
             min-width: 0; /* Allow text to wrap */
         }
        .xp-bar {
            width: 70px; /* Slightly wider */
            height: 8px; /* Taller */
            background: #333;
            border-radius: 4px; /* More rounded */
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
             flex-shrink: 0; /* Prevent shrinking */
        }
        .xp-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), #7A37CC); /* Gradient fill */
            transition: width 0.3s ease-in-out;
        }
         .sol-balance-display {
             font-weight: bold;
             /* Added gap for icon spacing */
             display: flex;
             align-items: center;
             gap: 4px;
             flex-shrink: 0; /* Prevent shrinking */
         }
         .fake-winnings-display {
              font-size: 0.8em;
              color: #aaa;
              margin-left: 10px;
              flex-shrink: 0; /* Prevent shrinking */
         }

         /* Demo Mode Banner */
         .guest-banner {
             position: absolute; /* Changed to absolute for better control */
             top: 60px; /* Position below header */
             left: 50%;
             transform: translateX(-50%);
             background: var(--primary);
             color: var(--text);
             padding: 5px 10px;
             border-radius: var(--button-border-radius);
             font-size: 0.8em; /* Slightly smaller font */
             font-weight: bold;
             z-index: 15; /* Above most elements */
             box-shadow: 0 2px 5px rgba(0,0,0,0.3);
             white-space: nowrap; /* Prevent wrapping */
         }


        /* Global Timer */
        .global-timer {
            position: absolute !important;
            top: 135px !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            font-size: 0.8em !important;
            padding: 4px 8px !important;
            white-space: nowrap !important;
            max-width: 180px;
            z-index: 25;
            text-align: center !important;
        }
         .global-timer.urgent {
             background: linear-gradient(45deg, var(--danger), #FF6B8A); /* Red gradient */
             animation: timer-pulse-fast 0.5s ease-in-out infinite alternate; /* Faster pulse */
         }

         /* Pre-Spin CTA */
         .pre-spin-cta {
             position: absolute !important;
             top: 160px !important;
             left: 50% !important;
             transform: translateX(-50%) !important;
             font-size: 0.8em !important;
             padding: 4px 8px !important;
             white-space: nowrap !important;
             max-width: 180px;
             z-index: 25;
             text-align: center !important;
         }


        /* Roulette Wheel */
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 40px auto 20px auto; /* More space */
            perspective: 1000px;
            animation: enter 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 5; /* Below timer, above background */
             margin-top: 10px !important;
        }
         #rouletteCanvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 12px solid #222; /* Thicker border */
            box-shadow: 0 0 64px rgba(153, 69, 255, 0.3), 0 0 32px rgba(255, 215, 0, 0.3); /* Multiple shadows */
            /* No conic gradient here, drawn on canvas */
            /* Metallic texture overlay handled by canvas drawing or filter */
             transition: box-shadow 0.3s ease-in-out; /* Smooth transition for glow */
         }
         #rouletteCanvas.countdown-glow {
             animation: wheel-pulse-glow 1s infinite alternate;
         }


        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 40px;
            clip-path: polygon(50% 100%, 0% 0%, 100% 0%);
            background: var(--accent);
            filter: drop-shadow(0 0 12px var(--accent));
            z-index: 2;
        }
        .pointer.vibrate {
            animation: vibrate 0.2s infinite;
        }
        .wheel-container.bounce {
            animation: bounce 0.3s;
        }
         .pointer.pulse {
             animation: pointer-pulse 1s infinite alternate;
         }

         /* Recent Spins Display */
         .recent-spins {
             position: absolute;
             bottom: 10px;
             left: 50%;
             transform: translateX(-50%);
             background: var(--panel-background);
             padding: 8px 12px;
             border-radius: var(--button-border-radius);
             font-size: 0.8em;
             z-index: 10;
             box-shadow: 0 2px 10px rgba(0,0,0,0.3);
             display: flex;
             gap: 5px;
             align-items: center;
             /* Allow wrapping on small screens */
             flex-wrap: wrap;
             justify-content: center;
         }
         .recent-spins .label {
             font-weight: bold;
             color: var(--accent);
             flex-shrink: 0; /* Prevent shrinking */
         }
         .recent-spins .outcome {
             padding: 3px 6px;
             border-radius: 4px;
             font-weight: bold;
             /* Animation for slide-in */
             animation: slideInFromRight 0.3s ease-out;
             flex-shrink: 0; /* Prevent shrinking */
         }
         .recent-spins .outcome.win { background-color: var(--success); color: #000; }
         .recent-spins .outcome.lose { background-color: var(--danger); color: #fff; }
         .recent-spins .outcome.primary { background-color: var(--primary); color: #fff; }
         .recent-spins .outcome.accent { background-color: var(--accent); color: #000; }


         @keyframes slideInFromRight {
             0% { transform: translateX(10px); opacity: 0; }
             100% { transform: translateX(0); opacity: 1; }
         }

        /* Chat System Fixes - REMOVED SEPARATE CHAT BUBBLE/CONTAINER */


        /* Unified Live Panel (Bets + Chat) */
        .live-panel-container {
            position: fixed; /* Changed to fixed for mobile drawer */
            top: 0; /* Position from top */
            right: 0; /* Position from right */
            width: 300px; /* Fixed width */
            height: 100%; /* Full height */
            z-index: 1000; /* High z-index */
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            /* Initial state (closed) - slide out from right */
            transform: translateX(100%);
        }

        .live-panel-container.active {
            /* Active state (open) */
            transform: translateX(0);
        }
         /* Removed .live-panel-container.closed as active/non-active handles state */


        .live-panel-toggle-btn {
            position: fixed; /* Changed to fixed */
            top: 120px; /* Position mid-right */
            right: 10px; /* Position from right edge */
            width: 44px; /* Increased touch target size */
            height: 44px; /* Increased touch target size */
            background: var(--panel-background);
            color: var(--accent);
            border: none;
            border-radius: 8px 0 0 8px; /* Rounded left side */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001; /* Above the panel */
            box-shadow: -2px 0 5px rgba(0,0,0,0.3); /* Shadow on the left */
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth transition */
        }
         /* Position toggle button when panel is open */
         .live-panel-container.active + .live-panel-toggle-btn {
             transform: translateX(-300px); /* Move button with the panel */
         }


         .live-panel-toggle-btn .unread-dot {
             position: absolute;
             top: 5px;
             right: 5px;
             width: 8px;
             height: 8px;
             background-color: var(--danger); /* Red dot */
             border-radius: 50%;
             display: none; /* Hidden by default */
         }


        /* Bet Controls */
        .bet-controls {
            /* position: absolute; */ /* Removed absolute positioning */
            background: var(--panel-background);
            padding: 15px;
            border-radius: var(--panel-border-radius);
            margin: 10px;
            display: flex;
            flex-direction: column;
            gap: 15px; /* Increased gap */
            width: calc(100% - 20px);
            max-width: 600px;
            backdrop-filter: blur(6px);
            z-index: 10;
             position: relative; /* Needed for onboarding tooltip */
             /* Added margin-top for desktop layout */
             margin-top: 20px;
        }
         .bet-label {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--accent);
         }
        .multiplier-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)); /* Responsive grid */
            gap: 8px;
             /* Onboarding glow */
             transition: box-shadow 0.3s ease-in-out;
        }
         .multiplier-options.onboarding-glow {
             animation: onboarding-glow 1.5s infinite alternate;
         }

        .multiplier-btn {
            background: #333;
            color: var(--text);
            padding: 10px;
            border: none;
            border-radius: var(--button-border-radius);
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
             display: flex; /* Enable flex for label alignment */
             flex-direction: column;
             align-items: center;
             justify-content: center;
             gap: 4px;
        }
        .multiplier-btn:hover:not(:disabled) {
            background: var(--primary);
            transform: scale(1.05);
             box-shadow: 0 4px 10px rgba(153, 69, 255, 0.5);
             animation: subtle-vibrate 0.3s infinite alternate; /* Subtle vibrate on hover */
        }
        .multiplier-btn.active:not(:disabled) {
            background: var(--success);
            transform: scale(1.1);
            box-shadow: 0 44px 10px rgba(20, 241, 149, 0.5);
        }
        .multiplier-btn:disabled {
            background: #555;
            cursor: not-allowed;
             transform: scale(1);
             box-shadow: none;
             opacity: 0.6; /* Indicate disabled state */
             animation: none; /* No vibrate when disabled */
        }
         .multiplier-btn:disabled[title]:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            white-space: nowrap;
            font-size: 0.8em;
            margin-bottom: 5px;
            z-index: 11; /* Above controls */
         }
         .multiplier-btn small {
             font-size: 0.6em;
             font-weight: normal;
             color: #aaa; /* Subtle gray */
         }


        .bet-amount {
            display: flex;
            flex-direction: column; /* Stack label and input/value */
            gap: 5px;
        }
         .bet-amount-top {
             display: flex;
             align-items: center;
             gap: 10px;
         }
         .bet-amount-label {
            font-weight: bold;
         }
        .bet-slider {
            flex: 1;
            -webkit-appearance: none; /* Override default appearance */
            appearance: none;
            height: 10px; /* Thicker slider */
            background: #333;
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
            cursor: pointer;
        }
        .bet-slider:hover:not(:disabled) {
            opacity: 1;
        }
        .bet-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px; /* Thumb size */
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
         .bet-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
             box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
         .bet-slider:disabled {
             opacity: 0.6;
             cursor: not-allowed;
         }
         .bet-slider:disabled[title]:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            white-space: nowrap;
            font-size: 0.8em;
            margin-bottom: 5px;
            z-index: 11; /* Above controls */
         }

        .bet-value {
            font-size: 1.2em; /* Larger value */
            font-weight: bold;
            color: var(--accent);
             min-width: 80px; /* Prevent jumping */
             text-align: right;
        }
         .max-win-text {
             font-size: 0.8em;
             color: #aaa;
             text-align: right;
             margin-top: -10px; /* Pull it closer to the slider */
         }
         .bet-summary {
             font-size: 0.9em;
             color: #ccc;
             margin-top: 10px;
             text-align: center;
         }


        .place-bet, .connect-wallet-btn {
            background: var(--primary);
            color: var(--text);
            padding: 12px;
            border: none;
            border-radius: var(--button-border-radius);
            font-size: 1.1em; /* Larger font */
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s, box-shadow 0.2s;
            width: 100%;
             box-shadow: 0 4px 10px rgba(153, 69, 255, 0.5);
        }
        .place-bet:hover:not(:disabled), .connect-wallet-btn:hover:not(:disabled) {
            background: #7A37CC;
            transform: scale(1.02);
             box-shadow: 0 6px 12px rgba(153, 69, 255, 0.7);
        }
        .place-bet:disabled, .connect-wallet-btn:disabled {
            background: #555;
            cursor: not-allowed;
             transform: scale(1);
             box-shadow: none;
             opacity: 0.6; /* Indicate disabled state */
        }
         .place-bet:disabled[title]:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            white-space: nowrap;
            font-size: 0.8em;
            margin-bottom: 5px;
            z-index: 11; /* Above controls */
         }

         /* Onboarding Tooltip */
         .onboarding-tooltip {
             position: absolute;
             bottom: 100%; /* Position above the target */
             left: 50%;
             transform: translateX(-50%);
             background: var(--accent);
             color: #000;
             padding: 8px 12px;
             border-radius: var(--button-border-radius);
             font-size: 0.9em;
             font-weight: bold;
             white-space: nowrap;
             pointer-events: none; /* Don't block clicks */
             opacity: 0;
             transition: opacity 0.3s ease-in-out;
             margin-bottom: 10px; /* Space between tooltip and target */
             z-index: 11; /* Above controls */
         }
         .onboarding-tooltip.visible {
             opacity: 1;
         }
         .onboarding-tooltip::after {
             content: '';
             position: absolute;
             top: 100%;
             left: 50%;
             transform: translateX(-50%);
             width: 0;
             height: 0;
             border-left: 8px solid transparent;
             border-right: 8px solid transparent;
             border-top: 8px solid var(--accent);
         }


        /* Unified Live Panel Styling */
        .live-panel {
            background: var(--panel-background);
            padding: 12px;
            border-radius: var(--panel-border-radius);
            max-height: 100%; /* Allow panel to take full height of container */
            overflow: hidden; /* Hide content overflow */
            backdrop-filter: blur(6px);
            width: 100%; /* Take full width of container */
            height: 100%; /* Take full height of container */
            font-size: 0.85em;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
        }

        .live-panel-tabs {
            display: flex;
            margin-bottom: 10px;
            border-bottom: 1px solid #555;
        }

        .live-panel-tab {
            flex-grow: 1;
            text-align: center;
            padding: 8px 0; /* Increased padding */
            cursor: pointer;
            font-weight: bold;
            color: #aaa;
            border-bottom: 2px solid transparent;
            transition: color 0.2s, border-bottom-color 0.2s;
            position: relative; /* Needed for unread dot */
        }

        .live-panel-tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }
         .live-panel-tab .unread-dot {
             position: absolute;
             top: 5px;
             right: 5px;
             width: 8px;
             height: 8px;
             background-color: var(--danger); /* Red dot */
             border-radius: 50%;
             display: none; /* Hidden by default */
         }


        .live-panel-content {
            flex-grow: 1;
            overflow-y: auto; /* Allow content to scroll */
            padding-right: 5px; /* Space for scrollbar */
        }
         .live-panel-content::-webkit-scrollbar {
            width: 6px;
         }
         .live-panel-content::-webkit-scrollbar-track {
            background: #333;
            border-radius: 3px;
         }
         .live-panel-content::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
         }


        /* Live Bets Feed (inside live-panel-content) */
        #liveBetsContent {
            display: none; /* Hidden by default */
        }
         #liveBetsContent.active {
            display: block; /* Show when active */
         }

        .bet-entry {
            padding: 8px 0;
            border-bottom: 1px solid #333;
            display: flex;
            gap: 6px;
            animation: enter 0.3s ease-out;
        }
         .bet-entry:last-child {
            border-bottom: none;
         }
         .bet-entry i {
            color: var(--success); /* Coin icon color */
         }
         .bet-entry .user {
            font-weight: bold;
            color: var(--primary);
         }
         .bet-entry .amount {
            color: var(--accent);
         }
         .bet-entry .multiplier {
            font-weight: bold;
         }

        /* Chat Box (inside live-panel-content) */
        #liveChatContent {
             display: none; /* Hidden by default */
             flex-direction: column; /* Use flex column for chat layout */
             height: 100%; /* Fill parent height */
        }
         #liveChatContent.active {
            display: flex; /* Show and use flex layout when active */
         }

         .chat-feed {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 10px;
         }
         .chat-feed::-webkit-scrollbar {
            width: 6px;
         }
         .chat-feed::-webkit-scrollbar-track {
            background: #333;
            border-radius: 3px;
         }
         .chat-feed::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
         }
        .chat-message {
            padding: 8px 0;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 6px;
            animation: enter 0.3s ease-out;
        }
         .chat-message:last-child {
            border-bottom: none;
         }
         .chat-message .user {
            font-weight: bold;
            color: var(--success); /* User name color */
         }
         .chat-message .system {
            font-style: italic;
            color: #aaa;
         }
        .chat-input {
            display: flex;
            gap: 6px;
            margin-top: auto; /* Push to bottom */
             flex-shrink: 0; /* Prevent shrinking */
        }
        .chat-input input {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: var(--input-border-radius);
            background: #333;
            color: var(--text);
            font-size: 0.85em;
             outline: none;
        }
        .chat-input button {
            background: var(--primary);
            color: var(--text);
            padding: 8px 12px;
            border: none;
            border-radius: var(--button-border-radius);
            cursor: pointer;
            font-size: 0.85em;
             transition: background 0.2s;
        }
         .chat-input button:hover {
            background: #7A37CC;
         }
        .reaction {
            font-size: 0.8em;
            margin-left: 4px;
            cursor: pointer;
             opacity: 0.8;
             transition: opacity 0.2s;
        }
         .reaction:hover {
            opacity: 1;
         }

        /* Token Rewards */
        .token-notification {
            position: absolute;
            bottom: 20px; /* Adjusted position */
            right: 10px;
            background: var(--panel-background);
            padding: 12px 20px;
            border-radius: var(--panel-border-radius);
            border-left: 6px solid var(--success);
            display: flex;
            align-items: center;
            gap: 8px;
            animation: enter 0.3s ease-out;
            z-index: 10;
             box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
         .token-notification button {
            background: var(--success);
            color: #000;
            padding: 4px 8px;
            border: none;
            border-radius: var(--button-border-radius);
            font-size: 0.8em;
            cursor: pointer;
             transition: background 0.2s;
         }
         .token-notification button:hover {
            background: #10C07D;
         }
        .token-float {
            position: absolute;
            color: var(--success);
            font-weight: bold;
            animation: floatUp 1.5s ease-out forwards;
             pointer-events: none; /* Don't block clicks */
        }

        /* Achievements */
        .achievement-popup {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: var(--panel-background);
            padding: 12px;
            border-radius: var(--panel-border-radius);
            border-left: 6px solid var(--accent);
            display: flex;
            align-items: center;
            gap: 8px;
            animation: enter 0.3s ease-out;
            z-index: 10;
             box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        .badge-icon {
            width: 36px;
            height: 36px;
            background: var(--accent);
            border-radius: 8px;
            display: grid;
            place-items: center;
            font-size: 1.2em;
             box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        /* Share Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9); /* Darker overlay */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
             opacity: 0;
             pointer-events: none;
             transition: opacity 0.3s ease-in-out;
        }
         .modal-overlay.visible {
             opacity: 1;
             pointer-events: auto;
         }
        .modal-content {
            background: var(--secondary);
            padding: 20px;
            border-radius: var(--panel-border-radius);
            text-align: center;
            max-width: 90%; /* Added max-width for mobile */
             width: 400px; /* Fixed width on larger screens */
             box-shadow: 0 8px 20px rgba(0,0,0,0.6);
             transform: translateY(-20px);
             opacity: 0;
             animation: enter 0.3s ease-out forwards;
             position: relative; /* For close button positioning */
             margin: 20px; /* Added margin for mobile padding */
        }
         .modal-content h2 {
            color: var(--success);
            margin-bottom: 10px;
         }
         .modal-content p {
            margin-bottom: 15px;
            color: #ccc;
         }
        .modal-content input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: none;
            border-radius: var(--input-border-radius);
            background: #333;
            color: var(--text);
             font-size: 0.9em;
             cursor: text;
        }
        .modal-content button {
            background: var(--primary);
            color: var(--text);
            padding: 10px 20px;
            border: none;
            border-radius: var(--button-border-radius);
            cursor: pointer;
            margin: 5px;
             transition: background 0.2s;
        }
         .modal-content button:hover {
            background: #7A37CC;
         }
         .modal-content .close-btn {
             position: absolute;
             top: 10px;
             right: 10px;
             background: none;
             border: none;
             font-size: 1.5em;
             color: #aaa;
             cursor: pointer;
         }

        /* Flash Screen */
        .flash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 15;
            opacity: 0;
            transition: opacity 0.1s ease-out; /* Faster flash */
        }
        .flash-screen.win {
            background: var(--success);
            opacity: 0.4; /* More intense flash */
        }
         .flash-screen.win-10x {
            background: var(--accent); /* Yellow flash for 10x */
            opacity: 0.6; /* Very intense flash */
         }
        .flash-screen.lose {
            background: var(--danger);
            opacity: 0.4; /* More intense flash */
        }

         /* Confetti Effect (for wins) */
         .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--accent); /* Default color */
            animation: confetti-fall 2s ease-out forwards;
            pointer-events: none;
            z-index: 16; /* Above flash screen */
         }

        /* Leaderboard */
        .leaderboard-panel {
            position: absolute;
            top: 120px;
            right: 10px;
            background: var(--panel-background);
            padding: 12px;
            border-radius: var(--panel-border-radius);
            max-height: 250px;
            overflow-y: auto;
            backdrop-filter: blur(6px);
            width: 250px;
            font-size: 0.85em;
            z-index: 10;
             box-shadow: 0 4px 15px rgba(0,0,0,0.5);
             display: flex; /* Use flexbox for tabs */
             flex-direction: column;
             /* Added margin-top for desktop layout */
             margin-top: 180px;
         }
         /* Leaderboard Auto-Scroll Animation (if needed) */
         /* @keyframes autoscroll {
             0% { transform: translateY(0); }
             100% { transform: translateY(calc(-100% + 250px)); } // Adjust 250px to max-height
         } */


         .leaderboard-tabs {
             display: flex;
             margin-bottom: 10px;
             border-bottom: 1px solid #555;
         }
         .leaderboard-tab {
             flex-grow: 1;
             text-align: center;
             padding: 5px 0;
             cursor: pointer;
             font-weight: bold;
             color: #aaa;
             border-bottom: 2px solid transparent;
             transition: color 0.2s, border-bottom-color 0.2s;
         }
         .leaderboard-tab.active {
             color: var(--accent);
             border-bottom-color: var(--accent);
         }
         .leaderboard-content-tab {
             display: none; /* Hide content tabs by default */
         }
         .leaderboard-content-tab.active {
             display: block; /* Show active content tab */
         }


         .leaderboard-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--accent);
         }
         .leaderboard-entry {
             padding: 6px 0;
             border-bottom: 1px solid #333;
             display: flex;
             justify-content: space-between;
             align-items: center; /* Align items vertically */
         }
         .leaderboard-entry:last-child {
             border-bottom: none;
         }
         .leaderboard-entry .user {
             font-weight: bold;
             color: var(--primary);
             display: flex; /* Enable flex for user + emoji */
             align-items: center;
             gap: 5px;
         }
         .leaderboard-entry .value {
             color: var(--text);
         }

        /* Limited Time Bonus Banner */
        .bonus-banner {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, var(--accent), #FF8C00); /* Orange-gold gradient */
            color: #000;
            padding: 8px 15px;
            border-radius: var(--button-border-radius);
            font-weight: bold;
            font-size: 0.9em;
            z-index: 12; /* Above header */
            box-shadow: 0 4px 10px rgba(255, 215, 0, 0.5);
            animation: bounce 0.5s infinite alternate; /* Bouncing animation */
            display: none; /* Hidden by default */
        }

        /* Low Balance Alert */
        .low-balance-alert {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--danger);
            color: var(--text);
            padding: 15px 20px;
            border-radius: var(--panel-border-radius);
            font-weight: bold;
            z-index: 15;
            box-shadow: 0 4px 15px rgba(255, 55, 95, 0.5);
            display: none; /* Hidden by default */
            animation: enter 0.3s ease-out;
            text-align: center;
        }
        .low-balance-alert button {
            background: var(--text);
            color: var(--danger);
            padding: 8px 15px;
            border: none;
            border-radius: var(--button-border-radius);
            font-weight: bold;
            margin-top: 10px;
            cursor: pointer;
        }

         /* Refill Demo SOL Modal */
         #refillFakeSolModal .modal-content h2 {
             color: var(--primary);
         }
         #refillFakeSolModal .modal-content button {
             background: var(--success);
             color: #000;
         }

        /* Double or Nothing Modal */
        #doubleOrNothingModal .modal-content h2 {
            color: var(--danger); /* Red title for loss prompt */
        }
         #doubleOrNothingModal .modal-content button {
             margin-top: 15px;
         }
         #doubleOrNothingModal .modal-content button:first-of-type {
             background: var(--success); /* Green for Try Again */
             color: #000;
         }
         #doubleOrNothingModal .modal-content button:first-of-type:hover {
             background: #10C07D;
         }
         #doubleOrNothingModal .modal-content button:last-of-type {
             background: #555; /* Darker for Cancel */
         }
         #doubleOrNothingModal .modal-content button:last-of-type:hover {
             background: #777;
         }

         /* Result Modal */
         #resultModal .modal-content h2.win {
             color: var(--success);
         }
          #resultModal .modal-content h2.lose {
             color: var(--danger);
         }
          #resultModal .modal-content button {
             background: var(--primary);
             color: var(--text);
             margin-top: 20px;
             font-size: 1.2em;
             padding: 12px 25px;
             /* Disable style for Spin Again button */
             transition: opacity 0.2s, background 0.2s;
          }
          #resultModal .modal-content button:disabled {
              opacity: 0.6;
              cursor: not-allowed;
              background: #555;
          }

          /* Idle Modal */
          #idleModal .modal-content h2 {
              color: var(--accent);
          }
           #idleModal .modal-content button {
               background: var(--success);
               color: #000;
           }

           /* Auto Demo Banner */
           .auto-demo-banner {
               position: absolute;
               top: 10px;
               left: 50%;
               transform: translateX(-50%);
               background: rgba(0,0,0,0.7);
               color: var(--accent);
               padding: 8px 15px;
               border-radius: var(--button-border-radius);
               font-weight: bold;
               font-size: 0.9em;
               z-index: 12;
               box-shadow: 0 2px 10px rgba(0,0,0,0.3);
               display: none; /* Hidden by default */
           }

        /* Mobile UI Enhancements */
        * {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* Fix iOS height issues */
        .full-height {
            height: -webkit-fill-available;
            height: 100vh;
        }

        /* Enhance touch targets */
        button,
        input[type="button"],
        .clickable {
            min-height: 44px;
            min-width: 44px;
        }

        /* Add haptic feedback styles */
        .haptic-feedback:active {
            transform: scale(0.96);
            transition: transform 0.1s ease-out;
        }


        /* Responsive Design */
        @media (max-width: 767px) {
             /* Mobile-only styles */
             .header {
                 padding: 8px 10px; /* Reduced padding */
                 margin: 5px; /* Reduced margin */
                 width: calc(100% - 10px); /* Adjust for margin */
                 flex-wrap: wrap; /* Allow header items to wrap */
                 justify-content: center; /* Center items when wrapped */
                 gap: 8px; /* Reduced gap */
             }
             .site-title {
                 font-size: 1.2em; /* Reduced font size */
                  flex-basis: 100%; /* Take full width when wrapped */
                 text-align: center;
             }
             .players-online, .user-profile {
                 padding: 6px 10px; /* Reduced padding */
                 font-size: 0.8em; /* Reduced font size */
                 gap: 6px; /* Reduced gap */
             }
             .user-profile {
                 flex-wrap: nowrap; /* Prevent wrapping inside user profile */
                 min-width: 0; /* Allow shrinking */
             }
             .avatar {
                 width: 24px; /* Reduced size */
                 height: 24px;
                 font-size: 0.8em;
             }
             .xp-bar {
                 width: 50px; /* Reduced width */
                 height: 6px; /* Reduced height */
             }
             .sol-balance-display {
                 font-size: 0.9em; /* Reduced font size */
             }
              .fake-winnings-display {
                 font-size: 0.7em; /* Reduced font size */
                 margin-left: 5px; /* Reduced margin */
             }

             /* Demo Mode Banner Mobile Position */
             .guest-banner {
                 top: 50px; /* Position slightly lower on mobile */
                 font-size: 0.7em; /* Smaller font on mobile */
                 padding: 4px 8px; /* Reduced padding */
             }


             .global-timer {
                 top: 80px; /* Adjusted position below header/guest banner */
                 padding: 8px 15px; /* Reduced padding */
                 font-size: 0.9em; /* Reduced font size */
             }
              .pre-spin-cta {
                 top: 115px; /* Adjusted position below timer */
                 padding: 6px 10px; /* Reduced padding */
                 font-size: 0.9em; /* Reduced font size */
             }

             /* Adjust padding for content above sticky bet controls on mobile */
             .container {
                 padding-bottom: 150px; /* Add padding to avoid content being hidden by sticky controls */
             }

             .bet-controls {
                 position: fixed; /* Keep fixed at bottom on mobile */
                 bottom: 0;
                 left: 0;
                 width: 100%;
                 border-radius: 0;
                 margin: 0;
                 padding: 10px; /* Reduced padding */
                 padding-bottom: calc(10px + env(safe-area-inset-bottom));
                 box-shadow: 0 -4px 15px rgba(0,0,0,0.5);
                 gap: 10px; /* Reduced gap */
                 /* Remove desktop margin-top */
                 margin-top: 0;
             }
             .bet-slider::-webkit-slider-thumb {
                 width: 25px; /* Larger thumb */
                 height: 25px;
             }
             .bet-slider::-moz-range-thumb {
                 width: 25px; /* Larger thumb */
                 height: 25px;
             }

             /* Live Panel Mobile Positioning */
             .live-panel-container {
                 top: 0; /* Full height from top */
                 right: 0; /* Position from right */
                 width: 250px; /* Mobile width */
                 height: 100%; /* Full height */
                 transform: translateX(100%); /* Start hidden offscreen right */
             }
             .live-panel-container.active {
                 transform: translateX(0); /* Slide in fully */
             }
              /* Removed .live-panel-container.closed as active/non-active handles state */

             .live-panel {
                 padding: 8px; /* Reduced padding inside the panel */
             }
             .live-panel-toggle-btn {
                 top: 120px; /* Position mid-right */
                 right: 10px; /* Keep on the right edge */
                 width: 44px; /* Touch target size */
                 height: 44px; /* Touch target size */
                 border-radius: 8px 0 0 8px; /* Rounded left side */
             }
              /* Position toggle button when panel is open on mobile */
             .live-panel-container.active + .live-panel-toggle-btn {
                 transform: translateX(-250px); /* Move button with the panel by panel width */
             }

             .live-panel-tab {
                 padding: 6px 0; /* Reduced padding */
                 font-size: 0.8em; /* Reduced font size */
             }
             .live-panel-content {
                 font-size: 0.8em; /* Reduced font size */
             }
             .bet-entry, .chat-message {
                 padding: 6px 0; /* Reduced padding */
                 gap: 4px; /* Reduced gap */
             }
             .chat-input {
                 gap: 4px; /* Reduced gap */
             }
             .chat-input input, .chat-input button {
                 padding: 6px; /* Reduced padding */
                 font-size: 0.8em; /* Reduced font size */
             }

             .leaderboard-panel {
                 display: none; /* Hide leaderboard on small screens */
             }
             .token-notification {
                 bottom: auto; /* Remove fixed bottom position */
                 top: 80px; /* Position near live panel */
                 right: 5px;
                 padding: 8px 12px;
                 font-size: 0.8em; /* Reduced font size */
             }
             .achievement-popup {
                 bottom: auto; /* Remove fixed bottom position */
                 top: 80px; /* Position near live panel */
                 left: 5px;
                 padding: 8px 12px;
                 font-size: 0.8em; /* Reduced font size */
             }
             .low-balance-alert {
                 bottom: calc(150px + 20px); /* Position above bet controls */
                 padding: 10px 15px; /* Reduced padding */
                 font-size: 0.9em; /* Reduced font size */
             }
             .recent-spins {
                 bottom: 160px; /* Position above bet controls */
                 padding: 6px 10px; /* Reduced padding */
                 font-size: 0.7em; /* Reduced font size */
                 gap: 3px; /* Reduced gap */
             }
             .bonus-banner {
                 top: 60px; /* Adjust position */
                 font-size: 0.8em; /* Reduced font size */
                 padding: 6px 12px; /* Reduced padding */
             }
             .fake-activity-banner {
                 top: 50px; /* Adjust position */
                 font-size: 0.7em; /* Reduced font size */
                 padding: 4px 8px; /* Reduced padding */
             }
             .ten-x-hit-banner {
                 top: 150px; /* Adjust position */
                 font-size: 0.9em; /* Reduced font size */
                 padding: 6px 12px; /* Reduced padding */
             }

             /* Sticky Bet Controls when Keyboard is NOT open */
             body:not(.keyboard-open) .bet-controls {
                 position: fixed;
                 bottom: 0;
                 left: 0;
                 width: 100%;
                 border-radius: 0;
                 margin: 0;
                 padding: 10px; /* Reduced padding */
                 padding-bottom: calc(10px + env(safe-area-inset-bottom));
                 box-shadow: 0 -4px 15px rgba(0,0,0,0.5);
                 gap: 10px; /* Reduced gap */
             }
              /* Adjust padding when keyboard is open */
             body.keyboard-open .container {
                 padding-bottom: 15px; /* Reduce bottom padding when keyboard is open */
             }
             body.keyboard-open .bet-controls {
                 position: static; /* Make bet controls static when keyboard is open */
                 margin-bottom: 0;
                 padding-bottom: 10px; /* Ensure bottom padding */
             }

             /* Modal Scaling on Mobile */
             .modal-content {
                padding: 15px; /* Reduced padding */
                margin: 10px; /* Reduced margin */
             }
             .modal-content h2 {
                font-size: 1.2em; /* Reduced font size */
             }
             .modal-content p {
                font-size: 0.9em; /* Reduced font size */
             }
             .modal-content button {
                padding: 8px 15px; /* Reduced padding */
                font-size: 1em; /* Reduced font size */
             }
             .modal-content .close-btn {
                font-size: 1.2em; /* Reduced size */
                top: 5px;
                right: 5px;
             }
        }

        @media (min-width: 768px) {
             .container {
                 flex-direction: row; /* Layout side-by-side */
                 justify-content: center;
                 align-items: center;
                 gap: 40px;
                 padding: 20px;
             }
             .header {
                 position: absolute;
                 top: 20px;
                 left: 50%;
                 transform: translateX(-50%);
                 width: auto; /* Auto width */
                 max-width: 960px;
                 /* Reset mobile specific styles */
                 padding: 10px 15px;
                 margin: 10px;
                 flex-wrap: nowrap;
                 justify-content: space-between;
                 gap: 10px;
             }
             .site-title {
                 font-size: 1.5em;
                 flex-basis: auto;
                 text-align: left;
             }
             .players-online, .user-profile {
                 padding: 8px 12px;
                 font-size: 0.9em;
                 gap: 8px;
             }
             .user-profile {
                 flex-wrap: nowrap;
             }
             .avatar {
                 width: 28px;
                 height: 28px;
                 font-size: 0.9em;
             }
              .xp-bar {
                 width: 70px;
                 height: 8px;
             }
             .sol-balance-display {
                 font-size: 1em;
             }
              .fake-winnings-display {
                 font-size: 0.8em;
                 margin-left: 10px;
             }

             /* Demo Mode Banner Desktop Position */
             .guest-banner {
                 top: 10px; /* Position near header */
                 font-size: 0.8em; /* Standard font size */
                 padding: 5px 10px; /* Standard padding */
             }


             .global-timer {
                 top: 100px; /* Adjusted position */
                 padding: 10px 20px;
                 font-size: 1em;
             }
              .pre-spin-cta {
                 top: 140px; /* Adjusted position */
                 padding: 8px 15px;
                 font-size: 1em;
             }


            .wheel-container {
                 width: 400px;
                 height: 400px;
                 margin: 0; /* Remove auto margin */
                 margin-top: 180px; /* Space for header/timer/cta */
             }
             #rouletteCanvas {
                 /* Adjust canvas size if needed, but CSS width/height should handle scaling */
             }

             /* Unified Live Panel on Desktop */
             .live-panel-container {
                 position: static; /* Remove fixed positioning */
                 max-height: none; /* Allow full height */
                 overflow: hidden; /* Keep overflow hidden for tab content */
                 width: 300px;
                 margin: 0;
                 align-self: stretch; /* Stretch to fill height */
                 margin-top: 180px; /* Space for header/timer/cta */
                 transform: translateX(0); /* Ensure visible on desktop */
             }
              /* Removed .live-panel-container.closed and .live-panel-container.active desktop styles */

             .live-panel {
                 padding: 12px; /* Reset padding */
             }
             .live-panel-toggle-btn {
                 display: none; /* Hide toggle button on desktop */
             }
              .live-panel-tab {
                 padding: 8px 0; /* Reset padding */
                 font-size: 0.85em; /* Reset font size */
             }
             .live-panel-content {
                 font-size: 0.85em; /* Reset font size */
             }
              .bet-entry, .chat-message {
                 padding: 8px 0; /* Reset padding */
                 gap: 6px; /* Reset gap */
             }
             .chat-input {
                 gap: 6px; /* Reset gap */
             }
             .chat-input input, .chat-input button {
                 padding: 8px; /* Reset padding */
                 font-size: 0.85em; /* Reset font size */
             }


             .bet-controls {
                 position: static; /* Remove absolute positioning */
                 width: 400px; /* Match wheel width */
                 margin: 20px 0 0 0; /* Space below wheel */
                 padding: 15px; /* Reset padding */
                 gap: 15px; /* Reset gap */
                 margin-top: 20px; /* Reset desktop margin-top */
             }
             body:not(.keyboard-open) .bet-controls {
                 position: static; /* Ensure static positioning on desktop */
                 padding-bottom: 15px; /* Ensure bottom padding */
             }
              body.keyboard-open .bet-controls {
                 position: static; /* Ensure static positioning on desktop */
                 margin-bottom: 0;
                 padding-bottom: 15px; /* Ensure bottom padding */
             }


             .token-notification {
                 bottom: auto;
                 top: 180px; /* Position below timer */
                 right: 10px;
                 padding: 12px 20px;
                 font-size: 1em;
             }
             .achievement-popup {
                 bottom: auto;
                 top: 180px; /* Position below timer */
                 left: 10px;
                 padding: 12px;
                 font-size: 0.85em;
             }
             .leaderboard-panel {
                 position: static; /* Remove absolute positioning */
                 max-height: none;
                 overflow-y: visible;
                 width: 300px;
                 margin: 0;
                 align-self: stretch;
                 margin-top: 180px;
             }
             .low-balance-alert {
                 bottom: 20px;
                 left: auto;
                 right: 20px; /* Position on the right */
                 transform: none;
                 padding: 15px 20px;
                 font-size: 1em;
             }
              .bonus-banner {
                 top: 10px;
                 left: 50%;
                 transform: translateX(-50%);
                 font-size: 0.9em;
                 padding: 8px 15px;
             }
             /* Auto Demo Banner Desktop Position */
             .auto-demo-banner {
                  top: 10px; /* Position next to guest banner */
                  font-size: 0.9em;
                  padding: 8px 15px;
             }

             /* Modal Scaling on Desktop */
             .modal-content {
                padding: 20px;
                margin: 20px;
             }
             .modal-content h2 {
                font-size: 1.5em;
             }
             .modal-content p {
                font-size: 1em;
             }
             .modal-content button {
                padding: 10px 20px;
                font-size: 1.1em;
             }
             .modal-content .close-btn {
                font-size: 1.5em;
                top: 10px;
                right: 10px;
             }
        }

/* Final fix for global timer and CTA alignment */
/* Removed conflicting rules */


/* Raise wheel higher for full visibility */
/* Removed conflicting rules */

/* Resize and reposition the modal close button */
.modal-content .close-btn {
    font-size: 1.2em !important;
    transform: scale(0.7) !important;
    top: 8px !important;
    right: 8px !important;
    padding: 2px !important;
    line-height: 1 !important;
    background: none !important;
    z-index: 999 !important;
}


/* Position timer and CTA just below the shop button */
/* Removed conflicting rules */


/* Lock final positioning of Next Spin & Place Your Bets just below Shop button */
/* Removed conflicting rules */


/* Move Recent Spins into top-right area below header */
.recent-spins {
    position: absolute !important;
    top: 135px !important;
    right: 16px !important;
    left: auto !important;
    bottom: auto !important;
    transform: none !important;
    background-color: rgba(0, 0, 0, 0.6) !important;
    padding: 4px 10px !important;
    font-size: 0.7em !important;
    border-radius: 10px !important;
    z-index: 999 !important;
    pointer-events: none !important;
}

/* Override any wheel container rules forcing it inside */
.wheel-container .recent-spins {
    position: absolute !important;
}


.tooltip-warning, #tooltip, .onboarding-tooltip.visible { display: none !important; opacity: 0 !important; pointer-events: none !important; }</style>
</head>
<body>
<div class="background-overlay" id="backgroundOverlay"></div>
<div class="strobe-overlay" id="strobeOverlay"></div>
<div class="container">
<div class="flash-screen" id="flashScreen"></div>
<div class="guest-banner" id="guestModeBanner" style="display: none;" title="You're playing with Demo SOL. Connect wallet to win real rewards.">
             ⚠️ Demo Mode – Demo SOL Only
        </div>
<div class="auto-demo-banner" id="autoDemoBanner" style="display: none;">
             Auto demo in progress – Tap anything to join
         </div>
<div class="header">
<div class="site-title">SolRoulette LIVE</div>
<div class="players-online"><i class="fas fa-users"></i> <span id="playersOnline">1,247</span> Online</div>
<div class="user-profile" id="userProfile">
</div>
</div>
<div class="global-timer" id="globalTimer">⏳ Next Spin: 25s</div>
<div class="pre-spin-cta" id="preSpinCta">Place your bets...</div>
<div class="bonus-banner" id="bonusBanner">Double $SPIN next 10 spins! 🔥</div>
<div class="live-panel-container" id="livePanelContainer">
<div class="live-panel" id="livePanel">
<div class="live-panel-tabs">
<div class="live-panel-tab active" data-tab="bets">Live Bets <span class="unread-dot" id="betsUnreadDot"></span></div>
<div class="live-panel-tab" data-tab="leaderboard">Leaderboard <span class="unread-dot" id="leaderboardUnreadDot"></span></div>
<div class="live-panel-tab" data-tab="chat">Live Chat <span class="unread-dot" id="chatUnreadDot"></span></div>
</div>
<div class="live-panel-content">
<div class="live-panel-content-tab active" id="liveBetsContent">
<div class="bet-entry"><i class="fas fa-dice"></i> <span class="system">System:</span> Welcome to SolRoulette LIVE!</div>
</div>
<div class="live-panel-content-tab" id="liveLeaderboardContent" style="display:none;">
  <div class="leaderboard-title">Top Players</div>
  <div class="leaderboard-entry"><span class="user">Alice</span> <span class="value">◎123.45</span></div>
  <div class="leaderboard-entry"><span class="user">Bob</span> <span class="value">◎98.76</span></div>
  <div class="leaderboard-entry"><span class="user">Charlie</span> <span class="value">◎77.00</span></div>
</div>

<div class="live-panel-content-tab" id="liveChatContent">
<div class="chat-feed" id="chatFeed">
<div class="chat-message"><i class="fas fa-robot"></i> <span class="system">System:</span> Spin to win big! <span class="reaction">🔥</span></div>
</div>
<div class="chat-input">
<input aria-label="Chat input" id="chatInput" placeholder="Say something..." type="text"/>
<button aria-label="Send chat message" id="sendChatBtn">Send</button>
</div>
</div>
</div>
</div>
</div>
<button aria-label="Toggle Live Panel" class="live-panel-toggle-btn" id="toggleLivePanel">
<i class="fas fa-chevron-left"></i> <span class="unread-dot" id="livePanelUnreadDot"></span>
</button>
<div class="leaderboard-panel" id="leaderboardPanel">
<div class="leaderboard-tabs">
<div class="leaderboard-tab active" data-tab="wager">Top Wager</div>
<div class="leaderboard-tab" data-tab="streak">Streak</div>
<div class="leaderboard-tab" data-tab="10x">10x Wins</div>
</div>
<div id="leaderboardContent">
<div class="leaderboard-content-tab active" data-tab="wager">
</div>
<div class="leaderboard-content-tab" data-tab="streak">
</div>
<div class="leaderboard-content-tab" data-tab="10x">
</div>
</div>
</div>
<div class="wheel-container" id="wheelContainer">
<div class="pointer" id="pointer"></div>
<canvas id="rouletteCanvas"></canvas>
<div class="recent-spins" id="recentSpins">
<span class="label">Recent:</span>
</div>
</div>
<div class="bet-controls">
<div class="onboarding-tooltip" id="onboardingTooltip">Start here – Pick your multiplier.</div>
<div class="bet-label">Select Multiplier</div>
<div class="multiplier-options" id="multiplierOptions">
<button class="multiplier-btn" data-multiplier="1.5" data-probability="30" title="">1.5x<small>Chance: 30%</small></button>
<button class="multiplier-btn" data-multiplier="2" data-probability="20" title="">2x<small>Chance: 20%</small></button>
<button class="multiplier-btn" data-multiplier="3" data-probability="20" title="">3x<small>Chance: 20%</small></button>
<button class="multiplier-btn" data-multiplier="5" data-probability="15" title="">5x<small>Chance: 15%</small></button>
<button class="multiplier-btn" data-multiplier="10" data-probability="15" title="">10x<small>Chance: 15%</small></button>
</div>
<div class="bet-amount">
<div class="bet-amount-top">
<span class="bet-amount-label">Bet Amount:</span>
<input class="bet-slider" id="betSlider" max="10" min="0.01" step="0.01" title="" type="range" value="0.5"/>
<span class="bet-value" id="betValue">◎0.50 SOL</span>
</div>
<div class="max-win-text">Max Win Per Round: ◎50</div>
</div>
<div class="bet-summary" id="betSummary" style="display: none;">
</div>
<button class="connect-wallet-btn" id="connectWalletBtn">Connect Wallet</button>
<button class="place-bet" id="placeBetBtn" style="display: none;" title="Connect your wallet to place real bets">🔒 Place Bet</button>
</div>
<div class="token-notification" id="tokenNotification" style="display: none;">
<i class="fas fa-coins"></i> Earned: <span id="tokenCount">0.000</span> $SPIN
            <button aria-label="Claim SPIN tokens" id="claimModalBtn">Claim</button>
</div>
<div id="achievementContainer"></div>
<div class="modal-overlay" id="walletModal">
<div class="modal-content">
<button aria-label="Close wallet modal" class="close-btn" id="closeWalletModalBtn">×</button>
<h2>Connect Your Wallet</h2>
<p>Choose a wallet to connect and start betting.</p>
<button aria-label="Connect Phantom Wallet" class="connect-wallet-button haptic-feedback" data-wallet="phantom" id="connectPhantomBtn">
                    Connect Phantom
                </button>
<button class="secondary-btn" id="justWatchingBtn">Just Watching? Close</button>
</div>
</div>
<div class="modal-overlay" id="profileModal">
<div class="modal-content">
<button aria-label="Close profile modal" class="close-btn" id="closeProfileModalBtn">×</button>
<h2>Your Profile</h2>
<div id="profileContent">
<div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
<div class="avatar large" id="profileAvatar">😎</div>
<div>
<div id="profileName" style="font-size: 1.2em; font-weight: bold;">Guest</div>
<div style="color: #aaa;">Level <span id="profileLevel">1</span></div>
<div class="xp-bar large" style="width: 150px;"><div class="xp-fill" id="profileXpFill" style="width: 0%;"></div></div>
</div>
</div>
<p>Wallet: <span id="profileWallet">Not Connected</span></p>
<p>Balance: <span id="profileBalance">0.00 SOL</span></p>
<p>Total Wagered: <span id="profileTotalWagered">0.00 SOL</span></p>
<p>Win Streak: <span id="profileWinStreak">0</span></p>
<p>10x Wins: <span id="profileTenXWins">0</span></p>
<p id="profileFakeWinnings" style="display: none;">Demo Winnings: <span id="fakeWinningsTotal">0.00</span> SOL</p>
<h3>Achievements</h3>
<div id="profileAchievementsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(50px, 1fr)); gap: 10px; margin-top: 10px;">
</div>
<h3>Referral Code</h3>
<input id="referralLinkInput" readonly="" type="text"/>
<button id="copyReferralLinkBtn">Copy Referral Link</button>
<button id="resetGuestProgressBtn" style="display: none; background: var(--danger); color: var(--text); margin-top: 20px;">Reset Guest Progress</button>
</div>
</div>
</div>
<div class="modal-overlay" id="shopModal">
<div class="modal-content">
<button aria-label="Close shop modal" class="close-btn" id="closeShopModalBtn">×</button>
<h2>$SPIN Shop</h2>
<p>Your $SPIN Balance: <span id="shopSpinBalance">0.000</span></p>
<div id="shopItems" style="margin-top: 20px;">
<div style="border: 1px solid #333; padding: 10px; margin-bottom: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
<span>🚀 Rocket Avatar</span>
<span>10 $SPIN <button class="buy-item-btn" data-cost="10" data-item-id="rocket_avatar">Buy</button></span>
</div>
<div style="border: 1px solid #333; padding: 10px; margin-bottom: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center;">
<span>🔥 Fire Chat Emote</span>
<span>5 $SPIN <button class="buy-item-btn" data-cost="5" data-item-id="fire_emote">Buy</button></span>
</div>
</div>
</div>
</div>
<div class="modal-overlay" id="dailyBonusModal">
<div class="modal-content">
<button aria-label="Close daily bonus modal" class="close-btn" id="closeDailyBonusModalBtn">×</button>
<h2>Daily Login Bonus!</h2>
<p>Claim your bonus for Day <span id="dailyBonusDay">1</span>!</p>
<p id="dailyBonusAmount">Reward: 0.01 $SPIN</p>
<button id="claimDailyBonusBtn">Claim Bonus</button>
</div>
</div>
<div class="modal-overlay" id="doubleOrNothingModal">
<div class="modal-content">
<button aria-label="Close double or nothing modal" class="close-btn" id="closeDoubleOrNothingBtn">×</button>
<h2>Want to win back your loss?</h2>
<p>Bet the same amount again on the same multiplier.</p>
<button id="tryAgainBetBtn">Try Again</button>
<button class="secondary-btn" id="cancelDoubleOrNothingBtn">Cancel</button>
</div>
</div>
<div class="modal-overlay" id="resultModal">
<div class="modal-content">
<button aria-label="Close result modal" class="close-btn" id="closeResultModalBtn">×</button>
<h2 id="resultModalTitle"></h2>
<p id="resultModalMessage"></p>
<button id="resultModalSpinAgainBtn">Spin Again</button>
</div>
</div>
<div class="modal-overlay" id="onboardingModal">
<div class="modal-content">
<h2>🎉 Welcome to SolRoulette LIVE!</h2>
<p>Here’s ◎500 in Demo SOL to try your luck. Connect your wallet any time to win real rewards.</p>
<button id="onboardingStartBtn">Start Playing</button>
<button id="onboardingConnectBtn">Connect Wallet</button>
</div>
</div>
<div class="modal-overlay" id="refillFakeSolModal">
<div class="modal-content">
<button aria-label="Close refill modal" class="close-btn" id="closeRefillFakeSolModalBtn">×</button>
<h2>Out of SOL?</h2>
<p>Looks like your demo SOL balance is low.</p>
<button id="refillFakeSolBtn">Refill ◎500 Demo SOL!</button>
</div>
</div>
<div class="modal-overlay" id="idleModal">
<div class="modal-content">
<button aria-label="Close idle modal" class="close-btn" id="closeIdleModalBtn">×</button>
<h2>Still here?</h2>
<p>Try a spin and feel the rush 🔥</p>
<button id="closeIdleModalBtn">OK</button>
</div>
</div>
<div class="modal-overlay" id="dailyRewardModal">
<div class="modal-content">
<button aria-label="Close daily reward modal" class="close-btn" id="closeDailyRewardModalBtn">×</button>
<h2>Daily Reward!</h2>
<p>Thanks for playing! Claim your bonus $SPIN.</p>
<p id="dailyRewardAmount">+0.05 $SPIN</p>
<button id="claimDailyRewardBtn">Claim</button>
</div>
</div>
<div class="modal-overlay" id="shareModal">
<div class="modal-content">
<button aria-label="Close share modal" class="close-btn" id="closeShareModalBtn">×</button>
<h2 id="shareTitle">Big Win!</h2>
<p id="shareMessage">Share your victory on X!</p>
<input aria-label="Share link" id="shareText" readonly="" type="text"/>
<button id="copyShareTextBtn"><i class="fas fa-copy"></i> Copy Link</button>
<button id="tweetWinBtn"><i class="fab fa-twitter"></i> Tweet Now</button>
</div>
</div>
<div class="modal-overlay" id="messageBox">
<div class="modal-content">
<button aria-label="Close message box" class="close-btn" id="closeMessageBoxBtn">×</button>
<h2 id="messageBoxTitle"></h2>
<p id="messageBoxContent"></p>
<button id="closeMessageBoxBtn">OK</button>
</div>
</div>
<div class="low-balance-alert" id="lowBalanceAlert">
             Low Balance! Your SOL is running low.
             <button id="topUpWalletBtn">Top Up Now (Mock)</button>
</div>
<div class="low-balance-alert" id="guestModeToast" style="background: rgba(153, 69, 255, 0.9); display: none;">
             Demo Mode – Playing with Demo SOL. Connect wallet to win real rewards.
         </div>
<div class="bonus-banner" id="fakeActivityBanner" style="background: rgba(0,0,0,0.6); color: #fff; animation: none; top: 50px; font-size: 0.8em; padding: 5px 10px;">
<span id="activityWatchers">🎯 32 watching</span> | <span id="activityBetting">7 betting 10x</span> | <span id="activityWins">3 wins just hit!</span>
</div>
<div class="bonus-banner" id="tenXHitBanner" style="background: linear-gradient(90deg, var(--danger), var(--accent)); color: #fff; animation: bounce 0.5s infinite alternate; top: 150px; font-size: 1em; padding: 8px 15px; display: none;">
             🔥 3 others just hit 10x! 🔥
         </div>
</div>
<script src="main.js" defer></script>
</body>

</html>
